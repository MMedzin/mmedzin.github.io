---
layout: post
title: "From a pdf table to an interactive map with locations"
subtitle: "Discover the journey from a PDF table filled with addresses, through the process of querying a
geo-coordinates API, all the way to creating captivating map visualizations using Python."
date: 2023-09-11
background: '/img/background.jpg'
---

<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>PDF_table_to_map</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
    <!-- <style type="text/css">
        moved to _layouts/post.html        
    </style> -->
    <!-- End of mermaid configuration -->
</head>

<body class="jp-Notebook" data-jp-theme-light="true" data-jp-theme-name="JupyterLab Light">
    <main>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=fcf52c92">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>I recently took a deep dive into my wardrobe and discovered a bunch of clothes that I'd
                            completely forgotten about. Instead of letting them collect dust, I decided to do a good
                            deed and donate them to charity.

                            But here's the twist: I only had a massive list of charity boxes in my voivodeship, over two
                            thousand of them, with just city and street addresses. I didn't want to manually search each
                            address, so I put on my tech hat and whipped up a small script. It transformed the PDF list
                            into a handy Pandas dataset, found map coordinates for each location, and voila! I had them
                            all displayed on a map.

                            Curious how I pulled it off? Let me give you a quick tutorial on how I made it happen.</p>
                        <blockquote>
                            <p>üéì <strong>What you'll learn below?</strong></p>
                            <ul>
                                <li>How to parse table from pdf document into a pandas dataframe.</li>
                                <li>How to query geo coordinates for the address string in Python.</li>
                                <li>How to display locations on a map in Python.</li>
                            </ul>
                        </blockquote>
                        <p>Libraries you'll need: <code>camelot</code>, <code>geopandas</code>, <code>pandas</code>,
                            <code>geopy</code>, <code>keplergl</code>.
                        </p>
                        <p>If you want to follow this tutorial with the same pdf doucment, you can get the table from <a
                                href="https://pck.pl/tekstylia/files/pojemniki-wielkopolskie.pdf">here</a> or simply
                            run:</p>
                        <div class="highlight">
                            <pre><span></span>wget<span class="w"> </span>https://pck.pl/tekstylia/files/pojemniki-wielkopolskie.pdf
</pre>
                        </div>
                        <p>Let's import libraries we'll need and begin.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs"
            id="cell-id=2112d971-587c-4b7c-a4e9-32822d63f455">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[1]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="kn">import</span> <span class="nn">camelot</span>
<span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">geopy.geocoders</span> <span class="kn">import</span> <span class="n">Bing</span>
<span class="kn">from</span> <span class="nn">keplergl</span> <span class="kn">import</span> <span class="n">KeplerGl</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=e405e81b">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <h2 id="Parsing-pdf-table-into-pandas-dataframe">Parsing pdf table into pandas dataframe<a
                                class="anchor-link" href="#Parsing-pdf-table-into-pandas-dataframe">¬∂</a></h2>
                        <p>First we need to parse the pdf table into a pandas dataframe. This is pretty straightforward
                            with the <code>camelot</code> library.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs"
            id="cell-id=c32663e1-166a-4b66-97c5-a185b42a8459">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[2]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">tables</span> <span class="o">=</span> <span class="n">camelot</span><span class="o">.</span><span class="n">read_pdf</span><span class="p">(</span><span class="s2">"pojemniki-wielkopolskie.pdf"</span><span class="p">,</span> <span class="n">pages</span><span class="o">=</span><span class="s2">"1-38"</span><span class="p">)</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=ac1ebbfc">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>I've parsed pages 1-38 (not all, as is possible with "all" option) to optimize the reading
                            process. This doucment contains over a thousend pages, but only first 38 contain
                            information, the rest is empty.</p>
                        <blockquote>
                            <p>üí° Tip for using <code>camelot</code> on MacOS
                                Camelot requires Ghostscript and Tkinter dependencies. I didn't have any problems with
                                Tkinter installation (<code>brew install tcl-tk</code>). But Had some troubles with
                                making Ghostscript run. I've tried multiple fixes and finally found <a
                                    href="https://stackoverflow.com/a/70182757">this Stack Overflow answer</a>, which
                                have worked for me.
                                To correctly install and setup ghostscript I did:</p>
                            <div class="highlight">
                                <pre><span></span>brew<span class="w"> </span>install<span class="w"> </span>ghostscript
conda<span class="w"> </span>install<span class="w"> </span>ghostscript<span class="w"> </span><span class="c1"># if fails then: conda install -c conda-forge ghostscript</span>
pip<span class="w"> </span>install<span class="w"> </span>ghostscript
</pre>
                            </div>
                        </blockquote>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=11df4c42">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[3]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">tables</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[3]:</div>
                        <div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/plain" tabindex="0">
                            <pre>&lt;TableList n=37&gt;</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a5d5855c">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>37 individual table were parsed. Now we need to concatenate them to a single dataframe.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=62de3a1a-026d-4a5b-a7e3-57483aabc515">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[4]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">table</span><span class="o">.</span><span class="n">df</span> <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">table_df</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[4]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>Miejscowo≈õƒá</th>
                                            <th>Powiat</th>
                                            <th>Adres lokalizacji</th>
                                            <th>Numer</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>1</th>
                                            <td>Chrzypsko Wielkie</td>
                                            <td>miƒôdzychodzki</td>
                                            <td>Chrzypsko ul. Szkolna\nChrzypsko ul. Jeziorna\...</td>
                                            <td>87649\n87645\n87651\n87654\n87646</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Czarnk√≥w</td>
                                            <td>czarnkowsko-\ntrzcianecki</td>
                                            <td>Huta\nGƒôbice\nBrze≈∫no\nSarbka\nMarunowo\nRoman...</td>
                                            <td>47289\n38863\n50674\n61254\n38864\n47298\n5153...</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Drawsko</td>
                                            <td>czarnkowsko-\ntrzcianecki</td>
                                            <td>Drawski M≈Çyn dz. 793/5\nDrawski M≈Çyn dz. 793/5...</td>
                                            <td>9385\n63159\n45201\n47294\n28355\n1szt.\n41126...</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Ko≈∫min Wlkp</td>
                                            <td>krotoszy≈Ñski</td>
                                            <td>Ko≈∫min Wlkp ul. Benedykta z Ko≈∫mina\nKo≈∫min Wl...</td>
                                            <td>94789\n94794\n88879\n88875\n88880</td>
                                        </tr>
                                        <tr>
                                            <th>5</th>
                                            <td>Margonin</td>
                                            <td>chodzieski</td>
                                            <td>Margonin ul. Mickiewicza\nMargonin ul. Broniew...</td>
                                            <td>40831\n45189\n7449\n95443\n59233\n48394\n21611...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=b564eb6d">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Names of the columns are in Polish so for more clarity, we'll translate them.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=10707577">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[5]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">CITY_COL</span> <span class="o">=</span> <span class="s2">"city"</span>
<span class="n">COUNTY_COL</span> <span class="o">=</span> <span class="s2">"county"</span>
<span class="n">ADDRESS_COL</span> <span class="o">=</span> <span class="s2">"address"</span>
<span class="n">NUMBER_COL</span> <span class="o">=</span> <span class="s2">"number"</span>

<span class="n">col_names_map</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"Miejscowo≈õƒá"</span><span class="p">:</span> <span class="n">CITY_COL</span><span class="p">,</span>
    <span class="s2">"Powiat"</span><span class="p">:</span> <span class="n">COUNTY_COL</span><span class="p">,</span>
    <span class="s2">"Adres lokalizacji"</span><span class="p">:</span> <span class="n">ADDRESS_COL</span><span class="p">,</span>
    <span class="s2">"Numer"</span><span class="p">:</span> <span class="n">NUMBER_COL</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">table_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">col_names_map</span><span class="p">)</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[5]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>1</th>
                                            <td>Chrzypsko Wielkie</td>
                                            <td>miƒôdzychodzki</td>
                                            <td>Chrzypsko ul. Szkolna\nChrzypsko ul. Jeziorna\...</td>
                                            <td>87649\n87645\n87651\n87654\n87646</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Czarnk√≥w</td>
                                            <td>czarnkowsko-\ntrzcianecki</td>
                                            <td>Huta\nGƒôbice\nBrze≈∫no\nSarbka\nMarunowo\nRoman...</td>
                                            <td>47289\n38863\n50674\n61254\n38864\n47298\n5153...</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Drawsko</td>
                                            <td>czarnkowsko-\ntrzcianecki</td>
                                            <td>Drawski M≈Çyn dz. 793/5\nDrawski M≈Çyn dz. 793/5...</td>
                                            <td>9385\n63159\n45201\n47294\n28355\n1szt.\n41126...</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Ko≈∫min Wlkp</td>
                                            <td>krotoszy≈Ñski</td>
                                            <td>Ko≈∫min Wlkp ul. Benedykta z Ko≈∫mina\nKo≈∫min Wl...</td>
                                            <td>94789\n94794\n88879\n88875\n88880</td>
                                        </tr>
                                        <tr>
                                            <th>5</th>
                                            <td>Margonin</td>
                                            <td>chodzieski</td>
                                            <td>Margonin ul. Mickiewicza\nMargonin ul. Broniew...</td>
                                            <td>40831\n45189\n7449\n95443\n59233\n48394\n21611...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a595d6b4">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>The <code>address</code> and <code>number</code> columns have multiline strings in them, were
                            each line corresponds to a separate charity box. We'll need to expand them to individual
                            rows. But first, I've noticed that, because of those multiline values, some cells in the pdf
                            file start on the one page and end on the other. This results in the empty values for the
                            first two columns (<code>city</code> and <code>county</code>).</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=00bd405a">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[8]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">CITY_COL</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">COUNTY_COL</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">)</span>
<span class="p">]</span><span class="o">.</span><span class="n">shape</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[8]:</div>
                        <div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/plain" tabindex="0">
                            <pre>(46, 4)</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=274c5249">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>However, we know, that those values should be the same as in the row above them. Therefore we
                            can easily impute them.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=63bdfebd">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[9]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]:</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">table_df</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">table_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">:</span>
            <span class="n">table_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span> <span class="o">=</span> <span class="n">prev_val</span>
        <span class="n">prev_val</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">col</span><span class="p">]</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=c2753104">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Let's make sure we don't have empty values in those columns anymore.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=1adfaee3">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[10]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="k">assert</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">CITY_COL</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">COUNTY_COL</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">)</span>
<span class="p">]</span><span class="o">.</span><span class="n">empty</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=d496751d">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>I'm interested only in boxes located in the Pozna≈Ñ city. So to speed up following steps,
                            let's filter only relevant rows.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=ff7d5848">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[11]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="sa">f</span><span class="s2">"`</span><span class="si">{</span><span class="n">CITY_COL</span><span class="si">}</span><span class="s2">` == 'Pozna≈Ñ'"</span><span class="p">)</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">shape</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[11]:</div>
                        <div class="jp-RenderedText jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/plain" tabindex="0">
                            <pre>(24, 4)</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a8e87fa4">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Now, we can expand multiline strings in <code>address</code> and <code>number</code> fields
                            into individual rows. First, we'll split those lines to lists.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=d7809c59">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[12]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span>
    <span class="o">**</span><span class="p">{</span><span class="n">ADDRESS_COL</span><span class="p">:</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">ADDRESS_COL</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)}</span>
<span class="p">)</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="n">NUMBER_COL</span><span class="p">:</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">NUMBER_COL</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)})</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[12]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>11</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>[Pozna≈Ñ ul.Dmowskiego 5/7, Pozna≈Ñ ul. Bogus≈Çaw...</td>
                                            <td>[88485, 87156, 88477, 87852, 88481, 88084, 956...</td>
                                        </tr>
                                        <tr>
                                            <th>16</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>[Osiedle Przyja≈∫ni 3 altana ≈õmietnikowa , Osie...</td>
                                            <td>[88601, 88593, 88596, 88603, 88604, 87644, 876...</td>
                                        </tr>
                                        <tr>
                                            <th>18</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>[Pozna≈Ñ ul. Dolna Wilda 30-42, Pozna≈Ñ ul. Doln...</td>
                                            <td>[88482, 88484, 87159, 95123, 87160, 87162, 954...</td>
                                        </tr>
                                        <tr>
                                            <th>25</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>[Pozna≈Ñ ul. Sarmacka 16, Pozna≈Ñ ul. Sarmacka 1...</td>
                                            <td>[87154, 87155, 87153, 87658, 87655, 87657, 876...</td>
                                        </tr>
                                        <tr>
                                            <th>33</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>[Pozna≈Ñ ul. Dƒôbina 17c, Pozna≈Ñ ul. Dƒôbina 16a,...</td>
                                            <td>[88037, 88033, 88036, 38464, 82700]</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=e4818bf8">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Now, we'll make sure lists have the same length for all corresponding <code>address</code>
                            and <code>number</code> fields.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=158231cd">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[13]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">ADDRESS_COL</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span> <span class="o">!=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">NUMBER_COL</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">))</span>
<span class="p">]</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[13]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>16</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>[Osiedle Przyja≈∫ni 3 altana ≈õmietnikowa , Osie...</td>
                                            <td>[88601, 88593, 88596, 88603, 88604, 87644, 876...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=d855ee6c">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>There is an issue for one row. It's due to error in parsing. We'll fix it by manually
                            correcting this row data.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=bb1bce9d">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[15]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">16</span><span class="p">]]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="n">CITY_COL</span><span class="p">:</span> <span class="p">{</span><span class="mi">16</span><span class="p">:</span> <span class="s2">"Pozna≈Ñ"</span><span class="p">},</span>
        <span class="n">COUNTY_COL</span><span class="p">:</span> <span class="p">{</span><span class="mi">16</span><span class="p">:</span> <span class="s2">"Pozna≈Ñ"</span><span class="p">},</span>
        <span class="n">ADDRESS_COL</span><span class="p">:</span> <span class="p">{</span>
            <span class="mi">16</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">"Osiedle Przyja≈∫ni 3 altana ≈õmietnikowa "</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 10 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 4-10 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 8-9 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 8-9 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 5-7 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni  11 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 17 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 23 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 12 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 13 G-F altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 18 altana ≈õmietnikowa"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 141A altana ≈õmietnikowa , pawilon sklepu Chata Polska"</span><span class="p">,</span>
                <span class="s2">"Osiedle Przyja≈∫ni 1-2 altana ≈õmietnikowa"</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="n">NUMBER_COL</span><span class="p">:</span> <span class="p">{</span>
            <span class="mi">16</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">"88601"</span><span class="p">,</span>
                <span class="s2">"88593"</span><span class="p">,</span>
                <span class="s2">"88596"</span><span class="p">,</span>
                <span class="s2">"88603"</span><span class="p">,</span>
                <span class="s2">"88604"</span><span class="p">,</span>
                <span class="s2">"87644"</span><span class="p">,</span>
                <span class="s2">"87643"</span><span class="p">,</span>
                <span class="s2">"87241"</span><span class="p">,</span>
                <span class="s2">"88600"</span><span class="p">,</span>
                <span class="s2">"88599"</span><span class="p">,</span>
                <span class="s2">"88602"</span><span class="p">,</span>
                <span class="s2">"88042"</span><span class="p">,</span>
                <span class="s2">"88041"</span><span class="p">,</span>
                <span class="s2">"87243"</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">},</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=42bf1c2b">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Let's make sure we've fixed the issue.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=e6ba358c">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[16]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="k">assert</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span>
    <span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">ADDRESS_COL</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span> <span class="o">!=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">NUMBER_COL</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="nb">len</span><span class="p">))</span>
<span class="p">]</span><span class="o">.</span><span class="n">empty</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=be518b48">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Now we can expand lists in <code>address</code> and <code>number</code> columns into separate
                            rows.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=ab25e094">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[17]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">explode</span><span class="p">([</span><span class="n">ADDRESS_COL</span><span class="p">,</span> <span class="n">NUMBER_COL</span><span class="p">])</span>
<span class="n">table_df</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[17]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>0</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ ul.Dmowskiego 5/7</td>
                                            <td>88485</td>
                                        </tr>
                                        <tr>
                                            <th>1</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ ul. Bogus≈Çawskiego 16</td>
                                            <td>87156</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ ul. Bogus≈Çawskiego 32</td>
                                            <td>88477</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ ul. Bogus≈Çawskiego 16</td>
                                            <td>87852</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ ul. Stablewskiego 6</td>
                                            <td>88481</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=1c259794">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Some values in <code>address</code> column contain unneccessary duplicate of the city name,
                            we'll remove it now.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=50ec3ac9">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[18]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">ADDRESS_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">ADDRESS_COL</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"Pozna≈Ñ "</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=ad57773b">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <h2 id="Getting-geo-coordinates-for-a-location-name">Getting geo coordinates for a location
                            name<a class="anchor-link" href="#Getting-geo-coordinates-for-a-location-name">¬∂</a></h2>
                        <p>Now we are ready to get geo coordinates for the addresses in the table. First we'll add a
                            country column and compose a full address field, to make coords search easier.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=39d9f4aa">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[19]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">COUNTRY_COL</span> <span class="o">=</span> <span class="s2">"country"</span>
<span class="n">FULL_ADDRESS_COL</span> <span class="o">=</span> <span class="s2">"full_address"</span>

<span class="n">table_df</span><span class="p">[</span><span class="n">COUNTRY_COL</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"Poland"</span>
<span class="n">table_df</span><span class="p">[</span><span class="n">FULL_ADDRESS_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="n">ADDRESS_COL</span><span class="p">,</span> <span class="n">CITY_COL</span><span class="p">,</span> <span class="n">COUNTRY_COL</span><span class="p">]]</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span>
    <span class="s2">","</span><span class="o">.</span><span class="n">join</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s2">"columns"</span>
<span class="p">)</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[19]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                            <th>country</th>
                                            <th>full_address</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>0</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul.Dmowskiego 5/7</td>
                                            <td>88485</td>
                                            <td>Poland</td>
                                            <td>ul.Dmowskiego 5/7,Pozna≈Ñ,Poland</td>
                                        </tr>
                                        <tr>
                                            <th>1</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 16</td>
                                            <td>87156</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 16,Pozna≈Ñ,Poland</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 32</td>
                                            <td>88477</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 32,Pozna≈Ñ,Poland</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 16</td>
                                            <td>87852</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 16,Pozna≈Ñ,Poland</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Stablewskiego 6</td>
                                            <td>88481</td>
                                            <td>Poland</td>
                                            <td>ul. Stablewskiego 6,Pozna≈Ñ,Poland</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=dccaf589">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Now we'll use Bing maps API to get coordinates for our addresses. There are many different
                            APIs available. I've chosen Bing, because it works very well and offers free API key for
                            125k requests for non-commercial use (you can get it <a
                                href="https://www.microsoft.com/en-us/maps/bing-maps/create-a-bing-maps-key#basic">here</a>).
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=155ec8b7">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[20]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">geolocator</span> <span class="o">=</span> <span class="n">Bing</span><span class="p">(</span><span class="s2">"&lt;API-KEY&gt;"</span><span class="p">)</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=a9716944">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>We have the geolocator set up. Now we'll add latitude and longitude columns, and fill them
                            with coordinates from the API.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=fa223fc3">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[21]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">LAT_COL</span> <span class="o">=</span> <span class="s2">"latitude"</span>
<span class="n">LONG_COL</span> <span class="o">=</span> <span class="s2">"longitude"</span>

<span class="n">table_df</span><span class="p">[</span><span class="n">LAT_COL</span><span class="p">]</span> <span class="o">=</span> <span class="s2">""</span>
<span class="n">table_df</span><span class="p">[</span><span class="n">LONG_COL</span><span class="p">]</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">table_df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">loc</span> <span class="o">=</span> <span class="n">geolocator</span><span class="o">.</span><span class="n">geocode</span><span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span> <span class="n">FULL_ADDRESS_COL</span><span class="p">])</span>
    <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span> <span class="n">LAT_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">latitude</span>
    <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">ind</span><span class="p">,</span> <span class="n">LONG_COL</span><span class="p">]</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="n">longitude</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[21]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                            <th>country</th>
                                            <th>full_address</th>
                                            <th>latitude</th>
                                            <th>longitude</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>0</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul.Dmowskiego 5/7</td>
                                            <td>88485</td>
                                            <td>Poland</td>
                                            <td>ul.Dmowskiego 5/7,Pozna≈Ñ,Poland</td>
                                            <td>52.393064</td>
                                            <td>16.900942</td>
                                        </tr>
                                        <tr>
                                            <th>1</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 16</td>
                                            <td>87156</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 16,Pozna≈Ñ,Poland</td>
                                            <td>52.394215</td>
                                            <td>16.894152</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 32</td>
                                            <td>88477</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 32,Pozna≈Ñ,Poland</td>
                                            <td>52.392208</td>
                                            <td>16.892817</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 16</td>
                                            <td>87852</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 16,Pozna≈Ñ,Poland</td>
                                            <td>52.394215</td>
                                            <td>16.894152</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Stablewskiego 6</td>
                                            <td>88481</td>
                                            <td>Poland</td>
                                            <td>ul. Stablewskiego 6,Pozna≈Ñ,Poland</td>
                                            <td>52.392838</td>
                                            <td>16.8956</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=3ff83868">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Let's save it to csv, so we don't need to query the API next time.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noOutputs" id="cell-id=4a02c907">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[24]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"donation_boxes_Poznan_df.csv"</span><span class="p">)</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=753d56fe">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <h2 id="Showing-geo-locations-with-address-info-on-a-map">Showing geo locations with address
                            info on a map<a class="anchor-link"
                                href="#Showing-geo-locations-with-address-info-on-a-map">¬∂</a></h2>
                        <p>Now, we can visualize donation boxes on the map. We'll use <code>geopandas</code> and
                            <code>keplergl</code> libraries for that.
                            If you just want to test visualization method, wthout parsing pdf and querying the API,
                            simply load <a href="../../../posts_files/2023-09-11/donation_boxes_Poznan_df.csv">this csv
                                file</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=a9745f07">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[26]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="n">table_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"donation_boxes_Poznan_df.csv"</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">table_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child jp-OutputArea-executeResult">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt">Out[26]:</div>
                        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult"
                            data-mime-type="text/html" tabindex="0">
                            <div>
                                <style scoped="">
                                    .dataframe tbody tr th:only-of-type {
                                        vertical-align: middle;
                                    }

                                    .dataframe tbody tr th {
                                        vertical-align: top;
                                    }

                                    .dataframe thead th {
                                        text-align: right;
                                    }
                                </style>
                                <table border="1" class="dataframe">
                                    <thead>
                                        <tr style="text-align: right;">
                                            <th></th>
                                            <th>city</th>
                                            <th>county</th>
                                            <th>address</th>
                                            <th>number</th>
                                            <th>country</th>
                                            <th>full_address</th>
                                            <th>latitude</th>
                                            <th>longitude</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>0</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul.Dmowskiego 5/7</td>
                                            <td>88485</td>
                                            <td>Poland</td>
                                            <td>ul.Dmowskiego 5/7,Pozna≈Ñ,Poland</td>
                                            <td>52.393064</td>
                                            <td>16.900942</td>
                                        </tr>
                                        <tr>
                                            <th>1</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 16</td>
                                            <td>87156</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 16,Pozna≈Ñ,Poland</td>
                                            <td>52.394215</td>
                                            <td>16.894152</td>
                                        </tr>
                                        <tr>
                                            <th>2</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 32</td>
                                            <td>88477</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 32,Pozna≈Ñ,Poland</td>
                                            <td>52.392208</td>
                                            <td>16.892817</td>
                                        </tr>
                                        <tr>
                                            <th>3</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Bogus≈Çawskiego 16</td>
                                            <td>87852</td>
                                            <td>Poland</td>
                                            <td>ul. Bogus≈Çawskiego 16,Pozna≈Ñ,Poland</td>
                                            <td>52.394215</td>
                                            <td>16.894152</td>
                                        </tr>
                                        <tr>
                                            <th>4</th>
                                            <td>Pozna≈Ñ</td>
                                            <td>Pozna≈Ñ</td>
                                            <td>ul. Stablewskiego 6</td>
                                            <td>88481</td>
                                            <td>Poland</td>
                                            <td>ul. Stablewskiego 6,Pozna≈Ñ,Poland</td>
                                            <td>52.392838</td>
                                            <td>16.895600</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=cfb8f5f6">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p>Visualization step is very easy. We'll convert dataframe with address info to
                            <code>geopandas.GeoDataFrame</code> and then add it to <code>keplergl.KeplerGL</code> map.
                            (I've also changed map's theme to light. Yes, I use light themes. Crazy, I know.)
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-CodeCell jp-Notebook-cell" id="cell-id=7de981e9">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">In¬†[30]:</div>
                    <div class="jp-CodeMirrorEditor jp-Editor jp-InputArea-editor" data-type="inline">
                        <div class="cm-editor cm-s-jupyter">
                            <div class="highlight hl-ipython3">
                                <pre><span></span><span class="nb">map</span> <span class="o">=</span> <span class="n">KeplerGl</span><span class="p">(</span>
    <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="p">{</span><span class="s2">"version"</span><span class="p">:</span> <span class="s2">"v1"</span><span class="p">,</span> <span class="s2">"config"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"mapStyle"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"styleType"</span><span class="p">:</span> <span class="s2">"light"</span><span class="p">}}},</span>
<span class="p">)</span>

<span class="n">table_geo</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoDataFrame</span><span class="p">(</span>
    <span class="n">table_df</span><span class="p">,</span>
    <span class="n">geometry</span><span class="o">=</span><span class="n">gpd</span><span class="o">.</span><span class="n">points_from_xy</span><span class="p">(</span><span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">LONG_COL</span><span class="p">],</span> <span class="n">table_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">LAT_COL</span><span class="p">]),</span>
<span class="p">)</span>

<span class="nb">map</span><span class="o">.</span><span class="n">add_data</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">table_geo</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">"charity boxes"</span><span class="p">)</span>
<span class="nb">map</span>
</pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="jp-Cell-outputWrapper">
                <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser">
                </div>
                <div class="jp-OutputArea jp-Cell-outputArea">
                    <div class="jp-OutputArea-child">
                        <div class="jp-OutputPrompt jp-OutputArea-prompt"></div>
                        <div class="jp-RenderedText jp-OutputArea-output" data-mime-type="text/plain" tabindex="0">
                            <pre>User Guide: https://docs.kepler.gl/docs/keplergl-jupyter
</pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="jp-Cell jp-MarkdownCell jp-Notebook-cell" id="cell-id=5529f52d">
            <div class="jp-Cell-inputWrapper" tabindex="0">
                <div class="jp-Collapser jp-InputCollapser jp-Cell-inputCollapser">
                </div>
                <div class="jp-InputArea jp-Cell-inputArea">
                    <div class="jp-InputPrompt jp-InputArea-prompt">
                    </div>
                    <div class="jp-RenderedHTMLCommon jp-RenderedMarkdown jp-MarkdownOutput"
                        data-mime-type="text/markdown">
                        <p><img alt="png" src="../../../posts_files/2023-09-11/map_pereview.png" /></p>
                    </div>
                </div>
            </div>
        </div>
    </main>
</body>

</html>